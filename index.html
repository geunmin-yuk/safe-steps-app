<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì•ˆì‹¬ì—¬í–‰ ìŠ¤í… - ëª¨ë“  ê°€ì¡±ì´ í•¨ê»˜ ì¦ê¸°ëŠ” ì•ˆì „í•œ ì—¬í–‰</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        .safety-badge {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .marker-hospital {
            background: linear-gradient(45deg, #4CAF50, #45a049);
            color: white;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            box-shadow: 0 2px 10px rgba(76, 175, 80, 0.5);
        }
        
        .marker-aed {
            background: linear-gradient(45deg, #f44336, #d32f2f);
            color: white;
            border-radius: 50%;
            width: 25px;
            height: 25px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            box-shadow: 0 2px 10px rgba(244, 67, 54, 0.5);
        }
        
        .info-window {
            max-width: 300px;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        
        .loading-spinner {
            border: 4px solid #f3f4f6;
            border-top: 4px solid #3b82f6;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-green-50">
    <!-- í—¤ë” -->
    <header class="bg-white shadow-sm sticky top-0 z-50">
        <div class="container mx-auto px-4 py-3">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                    <div class="text-2xl">âœˆï¸</div>
                    <div>
                        <h1 class="text-xl font-bold text-blue-600">ì•ˆì‹¬ì—¬í–‰ ìŠ¤í…</h1>
                        <p class="text-xs text-gray-600">ëª¨ë“  ê°€ì¡±ì´ í•¨ê»˜ ì¦ê¸°ëŠ” ì•ˆì „í•œ ì—¬í–‰</p>
                    </div>
                </div>
                
                <div class="flex items-center space-x-2">
                    <button id="currentLocationBtn" class="bg-blue-500 text-white px-3 py-2 rounded-lg text-sm hover:bg-blue-600 transition-colors">
                        <i class="fas fa-location-dot mr-1"></i>
                        ë‚´ ìœ„ì¹˜
                    </button>
                    <button id="emergencyBtn" class="bg-red-500 text-white px-3 py-2 rounded-lg text-sm hover:bg-red-600 transition-colors">
                        <i class="fas fa-phone mr-1"></i>
                        ì‘ê¸‰ìƒí™©
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- ë©”ì¸ ì»¨í…ì¸  -->
    <main class="container mx-auto px-4 py-6">
        <!-- ê²€ìƒ‰ ì„¹ì…˜ -->
        <section class="bg-white rounded-xl shadow-lg p-6 mb-6">
            <div class="flex flex-col md:flex-row gap-4">
                <div class="flex-1">
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        ğŸ—ºï¸ ì—¬í–‰ì§€ë¥¼ ê²€ìƒ‰í•´ë³´ì„¸ìš”
                    </label>
                    <div class="relative">
                        <input 
                            type="text" 
                            id="searchInput" 
                            placeholder="ì˜ˆ: ì„¤ì•…ì‚°, ì œì£¼ë„, ë¶€ì‚° í•´ìš´ëŒ€..."
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                        >
                        <button id="searchBtn" class="absolute right-2 top-2 bg-blue-500 text-white p-2 rounded-md hover:bg-blue-600">
                            <i class="fas fa-search"></i>
                        </button>
                    </div>
                </div>
                
                <div class="flex-1">
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ ì—¬í–‰ íƒ€ì… ì„ íƒ
                    </label>
                    <select id="travelType" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                        <option value="family">ê°€ì¡± ì—¬í–‰ (3ì„¸ëŒ€ í•¨ê»˜)</option>
                        <option value="senior">ì‹œë‹ˆì–´ ì—¬í–‰ (ì•ˆì‹¬ ìµœìš°ì„ )</option>
                        <option value="adventure">ëª¨í—˜ ì—¬í–‰ (ì•ˆì „í•œ ìŠ¤ë¦´)</option>
                        <option value="healing">íë§ ì—¬í–‰ (í¸ì•ˆí•œ íœ´ì‹)</option>
                    </select>
                </div>
            </div>
        </section>

        <!-- í˜„ì¬ ìœ„ì¹˜ ì•ˆì „ë„ -->
        <section id="currentSafetySection" class="bg-white rounded-xl shadow-lg p-6 mb-6 hidden fade-in">
            <div class="text-center">
                <div class="safety-badge inline-block bg-green-100 text-green-800 px-6 py-3 rounded-full text-lg font-bold mb-4">
                    <i class="fas fa-shield-check mr-2"></i>
                    <span id="safetyScore">95</span>/100ì 
                </div>
                <h3 class="text-xl font-semibold text-gray-800 mb-2">
                    ğŸŒŸ í˜„ì¬ ìœ„ì¹˜ëŠ” <span class="text-green-600">ì™„ë²½í•œ ì•ˆì‹¬ ì§€ì—­</span>ì…ë‹ˆë‹¤!
                </h3>
                <p class="text-gray-600 mb-4">24ì‹œê°„ ì˜ë£Œì§„ ëŒ€ê¸°, 5ë¶„ ë‚´ ì‘ê¸‰ì‹¤ ì ‘ê·¼ ê°€ëŠ¥</p>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div class="bg-green-50 p-4 rounded-lg">
                        <div class="text-2xl mb-2">ğŸ¥</div>
                        <div class="text-sm font-medium text-gray-700">ê°€ì¥ ê°€ê¹Œìš´ ë³‘ì›</div>
                        <div class="text-lg font-bold text-green-600" id="nearestHospital">ê³„ì‚° ì¤‘...</div>
                    </div>
                    <div class="bg-blue-50 p-4 rounded-lg">
                        <div class="text-2xl mb-2">âš¡</div>
                        <div class="text-sm font-medium text-gray-700">AED ì ‘ê·¼ì„±</div>
                        <div class="text-lg font-bold text-blue-600" id="nearestAED">ê³„ì‚° ì¤‘...</div>
                    </div>
                    <div class="bg-purple-50 p-4 rounded-lg">
                        <div class="text-2xl mb-2">ğŸ’Š</div>
                        <div class="text-sm font-medium text-gray-700">24ì‹œê°„ ì•½êµ­</div>
                        <div class="text-lg font-bold text-purple-600" id="nearestPharmacy">ê³„ì‚° ì¤‘...</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ì§€ë„ ë¡œë”© ìƒíƒœ -->
        <section id="mapLoadingSection" class="bg-white rounded-xl shadow-lg p-6 mb-6">
            <div class="text-center py-12">
                <div class="loading-spinner mx-auto mb-4"></div>
                <p class="text-gray-600">ì¹´ì¹´ì˜¤ë§µì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
                <p class="text-sm text-gray-500 mt-2">ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”</p>
            </div>
        </section>

        <!-- ì§€ë„ ì„¹ì…˜ -->
        <section id="mapSection" class="bg-white rounded-xl shadow-lg p-6 mb-6 hidden">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-xl font-semibold text-gray-800">
                    <i class="fas fa-map-marked-alt mr-2 text-blue-500"></i>
                    ì‹¤ì‹œê°„ ì•ˆì‹¬ ì§€ë„
                </h2>
                
                <div class="flex space-x-2">
                    <button id="toggleHospitals" class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium hover:bg-green-200 transition-colors">
                        <i class="fas fa-hospital mr-1"></i>
                        ë³‘ì› <span class="ml-1" id="hospitalCount">0</span>
                    </button>
                    <button id="toggleAEDs" class="bg-red-100 text-red-800 px-3 py-1 rounded-full text-sm font-medium hover:bg-red-200 transition-colors">
                        <i class="fas fa-heart-pulse mr-1"></i>
                        AED <span class="ml-1" id="aedCount">0</span>
                    </button>
                    <button id="togglePharmacies" class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium hover:bg-blue-200 transition-colors">
                        <i class="fas fa-pills mr-1"></i>
                        ì•½êµ­ <span class="ml-1" id="pharmacyCount">0</span>
                    </button>
                </div>
            </div>
            
            <div id="map" class="w-full h-96 rounded-lg border"></div>
            
            <!-- ì§€ë„ ë²”ë¡€ -->
            <div class="mt-4 flex flex-wrap items-center justify-center gap-4 text-sm">
                <div class="flex items-center">
                    <div class="w-4 h-4 bg-green-500 rounded-full mr-2"></div>
                    <span>í”„ë¦¬ë¯¸ì—„ ì•ˆì‹¬ (90-100ì )</span>
                </div>
                <div class="flex items-center">
                    <div class="w-4 h-4 bg-blue-500 rounded-full mr-2"></div>
                    <span>ìš°ìˆ˜ ì•ˆì‹¬ (80-89ì )</span>
                </div>
                <div class="flex items-center">
                    <div class="w-4 h-4 bg-yellow-500 rounded-full mr-2"></div>
                    <span>ì–‘í˜¸ ì•ˆì‹¬ (70-79ì )</span>
                </div>
                <div class="flex items-center">
                    <div class="w-4 h-4 bg-orange-500 rounded-full mr-2"></div>
                    <span>ê¸°ë³¸ ì•ˆì‹¬ (60-69ì )</span>
                </div>
            </div>
        </section>

        <!-- ì¶”ì²œ ê´€ê´‘ì§€ -->
        <section class="mb-6">
            <h2 class="text-xl font-semibold text-gray-800 mb-4">
                <i class="fas fa-star mr-2 text-yellow-500"></i>
                ì´ë²ˆ ì£¼ë§ ì¶”ì²œ! ì•ˆì‹¬í•˜ê³  ì¦ê¸°ëŠ” ì—¬í–‰ì§€
            </h2>
            
            <div id="recommendedPlaces" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- ì¶”ì²œ ê´€ê´‘ì§€ê°€ ë¡œë”©ë˜ëŠ” ë™ì•ˆ í‘œì‹œí•  ìŠ¤ì¼ˆë ˆí†¤ -->
                <div class="bg-white rounded-xl shadow-lg overflow-hidden animate-pulse">
                    <div class="h-48 bg-gray-300"></div>
                    <div class="p-5">
                        <div class="h-4 bg-gray-300 rounded mb-2"></div>
                        <div class="h-3 bg-gray-300 rounded mb-4"></div>
                        <div class="h-10 bg-gray-300 rounded"></div>
                    </div>
                </div>
                <div class="bg-white rounded-xl shadow-lg overflow-hidden animate-pulse">
                    <div class="h-48 bg-gray-300"></div>
                    <div class="p-5">
                        <div class="h-4 bg-gray-300 rounded mb-2"></div>
                        <div class="h-3 bg-gray-300 rounded mb-4"></div>
                        <div class="h-10 bg-gray-300 rounded"></div>
                    </div>
                </div>
                <div class="bg-white rounded-xl shadow-lg overflow-hidden animate-pulse">
                    <div class="h-48 bg-gray-300"></div>
                    <div class="p-5">
                        <div class="h-4 bg-gray-300 rounded mb-2"></div>
                        <div class="h-3 bg-gray-300 rounded mb-4"></div>
                        <div class="h-10 bg-gray-300 rounded"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ì‹¤ì‹œê°„ ì•ˆì „ ì•Œë¦¼ -->
        <section id="safetyAlerts" class="bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-xl p-6 hidden fade-in">
            <h3 class="text-lg font-semibold mb-3">
                <i class="fas fa-bell mr-2"></i>
                ì‹¤ì‹œê°„ ì•ˆì „ ì•Œë¦¼
            </h3>
            <div id="alertsList">
                <!-- ì•Œë¦¼ë“¤ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
            </div>
        </section>
    </main>

    <!-- ì‘ê¸‰ìƒí™© ëª¨ë‹¬ -->
    <div id="emergencyModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center p-4">
        <div class="bg-white rounded-xl max-w-md w-full p-6">
            <div class="text-center mb-6">
                <div class="text-6xl text-red-500 mb-4">ğŸš¨</div>
                <h3 class="text-xl font-bold text-gray-800 mb-2">ì‘ê¸‰ìƒí™© ëŒ€ì‘</h3>
                <p class="text-gray-600">ë¹ ë¥¸ ë„ì›€ì„ ìœ„í•´ ìƒí™©ì„ ì„ íƒí•´ì£¼ì„¸ìš”</p>
            </div>
            
            <div class="space-y-3 mb-6">
                <button class="emergency-btn w-full bg-red-500 text-white p-4 rounded-lg hover:bg-red-600 transition-colors" data-emergency="chest_pain">
                    <i class="fas fa-heart mr-3"></i>ê°€ìŠ´ í†µì¦ / í˜¸í¡ê³¤ë€
                </button>
                <button class="emergency-btn w-full bg-red-500 text-white p-4 rounded-lg hover:bg-red-600 transition-colors" data-emergency="unconscious">
                    <i class="fas fa-user-injured mr-3"></i>ì˜ì‹ìƒìŒ / ì“°ëŸ¬ì§
                </button>
                <button class="emergency-btn w-full bg-red-500 text-white p-4 rounded-lg hover:bg-red-600 transition-colors" data-emergency="bleeding">
                    <i class="fas fa-droplet mr-3"></i>ì‹¬í•œ ì¶œí˜ˆ / ì™¸ìƒ
                </button>
                <button class="emergency-btn w-full bg-red-500 text-white p-4 rounded-lg hover:bg-red-600 transition-colors" data-emergency="other">
                    <i class="fas fa-exclamation-triangle mr-3"></i>ê¸°íƒ€ ì‘ê¸‰ìƒí™©
                </button>
            </div>
            
            <div class="flex space-x-3">
                <button id="call119" class="flex-1 bg-green-500 text-white p-3 rounded-lg hover:bg-green-600 transition-colors">
                    <i class="fas fa-phone mr-2"></i>119 ì‹ ê³ 
                </button>
                <button id="closeEmergencyModal" class="flex-1 bg-gray-500 text-white p-3 rounded-lg hover:bg-gray-600 transition-colors">
                    ì·¨ì†Œ
                </button>
            </div>
        </div>
    </div>

    <!-- ì „ì—­ ë¡œë”© -->
    <div id="globalLoading" class="fixed inset-0 bg-white bg-opacity-95 z-50 flex items-center justify-center">
        <div class="text-center">
            <div class="loading-spinner mx-auto mb-4"></div>
            <p class="text-gray-600 font-medium">ì•ˆì‹¬ì—¬í–‰ ìŠ¤í…ì„ ì¤€ë¹„í•˜ëŠ” ì¤‘...</p>
            <p class="text-sm text-gray-500 mt-2">ê³§ ì „êµ­ì˜ ì•ˆì‹¬ ê´€ê´‘ì§€ë¥¼ ë§Œë‚˜ë³´ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤!</p>
        </div>
    </div>

    <!-- ì¹´ì¹´ì˜¤ë§µ API ë¡œë“œ ë° ì•± ì´ˆê¸°í™” -->
    <script>
        // ì „ì—­ ë³€ìˆ˜
        let map;
        let markers = [];
        let currentPosition = null;
        let safetyCircles = [];
        let isMapLoaded = false;
        
        // ì¹´ì¹´ì˜¤ë§µ API ë™ì  ë¡œë“œ í•¨ìˆ˜
        function loadKakaoMapAPI() {
            return new Promise((resolve, reject) => {
                if (window.kakao && window.kakao.maps) {
                    resolve();
                    return;
                }
                
                const script = document.createElement('script');
                script.type = 'text/javascript';
                script.src = '//dapi.kakao.com/v2/maps/sdk.js?appkey=cb042192382ed6a341ff3f2649753c8f&libraries=services&autoload=false';
                
                script.onload = function() {
                    kakao.maps.load(function() {
                        console.log('ì¹´ì¹´ì˜¤ë§µ API ë¡œë“œ ì™„ë£Œ');
                        resolve();
                    });
                };
                
                script.onerror = function() {
                    console.error('ì¹´ì¹´ì˜¤ë§µ API ë¡œë“œ ì‹¤íŒ¨');
                    reject(new Error('ì¹´ì¹´ì˜¤ë§µ API ë¡œë“œ ì‹¤íŒ¨'));
                };
                
                document.head.appendChild(script);
            });
        }
        
        // ì•± ì´ˆê¸°í™”
        async function initializeApp() {
            try {
                console.log('ì•± ì´ˆê¸°í™” ì‹œì‘...');
                
                // ì¹´ì¹´ì˜¤ë§µ API ë¡œë“œ ëŒ€ê¸°
                await loadKakaoMapAPI();
                console.log('ì¹´ì¹´ì˜¤ë§µ API ë¡œë“œ ì„±ê³µ');
                
                // ì§€ë„ ì´ˆê¸°í™”
                await initializeMap();
                console.log('ì§€ë„ ì´ˆê¸°í™” ì™„ë£Œ');
                
                // UI ì´ˆê¸°í™”
                initializeUI();
                console.log('UI ì´ˆê¸°í™” ì™„ë£Œ');
                
                // ë¡œë”© í™”ë©´ ìˆ¨ê¸°ê¸°
                document.getElementById('globalLoading').style.display = 'none';
                
                // ì§€ë„ ì„¹ì…˜ í‘œì‹œ
                document.getElementById('mapLoadingSection').style.display = 'none';
                document.getElementById('mapSection').classList.remove('hidden');
                
                console.log('ì•± ì´ˆê¸°í™” ì™„ë£Œ!');
                
            } catch (error) {
                console.error('ì•± ì´ˆê¸°í™” ì˜¤ë¥˜:', error);
                
                // ì˜¤ë¥˜ ì²˜ë¦¬
                document.getElementById('globalLoading').innerHTML = `
                    <div class="text-center">
                        <div class="text-red-500 text-6xl mb-4">âš ï¸</div>
                        <p class="text-red-600 font-medium mb-2">ì§€ë„ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤</p>
                        <p class="text-sm text-gray-500 mb-4">ë„¤íŠ¸ì›Œí¬ ì—°ê²°ì„ í™•ì¸í•´ì£¼ì„¸ìš”</p>
                        <button onclick="location.reload()" class="bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600">
                            ë‹¤ì‹œ ì‹œë„
                        </button>
                    </div>
                `;
            }
        }
        
        // ì¹´ì¹´ì˜¤ë§µ ì´ˆê¸°í™”
        async function initializeMap() {
            return new Promise((resolve) => {
                const container = document.getElementById('map');
                const options = {
                    center: new kakao.maps.LatLng(37.5665, 126.9780), // ì„œìš¸ ì¤‘ì‹¬
                    level: 7,
                    mapTypeId: kakao.maps.MapTypeId.ROADMAP
                };
                
                map = new kakao.maps.Map(container, options);
                
                // ì§€ë„ í´ë¦­ ì´ë²¤íŠ¸
                kakao.maps.event.addListener(map, 'click', function(mouseEvent) {
                    const latlng = mouseEvent.latLng;
                    showLocationSafety(latlng);
                });
                
                // ì§€ë„ ë¡œë“œ ì™„ë£Œ ì´ë²¤íŠ¸
                kakao.maps.event.addListener(map, 'tilesloaded', function() {
                    if (!isMapLoaded) {
                        isMapLoaded = true;
                        console.log('ì§€ë„ íƒ€ì¼ ë¡œë“œ ì™„ë£Œ');
                        
                        // ë°ëª¨ ë°ì´í„° ë¡œë“œ (ì§€ì—° ë¡œë”©)
                        setTimeout(() => {
                            loadDemoData();
                            resolve();
                        }, 500);
                    }
                });
            });
        }
        
        // ë°ëª¨ ë°ì´í„° ë¡œë“œ (ìµœì í™”ëœ ë²„ì „)
        function loadDemoData() {
            console.log('ë°ëª¨ ë°ì´í„° ë¡œë“œ ì‹œì‘');
            
            const demoPlaces = [
                {
                    name: 'ì„¤ì•…ì‚° êµ­ë¦½ê³µì›',
                    lat: 38.1192, lng: 128.4651,
                    safetyScore: 87,
                    type: 'mountain',
                    features: ['24ì‹œê°„ ì‘ê¸‰ì‹¤', 'í—¬ê¸° ì°©ë¥™ì¥', 'ì‚°ì•… êµ¬ì¡°ëŒ€']
                },
                {
                    name: 'ì œì£¼ í•œë¼ì‚°',
                    lat: 33.3617, lng: 126.5292,
                    safetyScore: 92,
                    type: 'mountain',
                    features: ['ì¢…í•©ë³‘ì› 10ë¶„', 'ì‘ê¸‰ì²˜ì¹˜ì†Œ ìƒì£¼', 'AED ì™„ë¹„']
                },
                {
                    name: 'ë¶€ì‚° í•´ìš´ëŒ€',
                    lat: 35.1587, lng: 129.1604,
                    safetyScore: 95,
                    type: 'beach',
                    features: ['í•´ìƒêµ¬ì¡°ëŒ€', '24ì‹œê°„ ì‘ê¸‰ì‹¤', 'ì˜ë£Œì§„ ìƒì£¼']
                },
                {
                    name: 'ê²½ì£¼ ë¶ˆêµ­ì‚¬',
                    lat: 35.7898, lng: 129.3320,
                    safetyScore: 89,
                    type: 'cultural',
                    features: ['ì‘ê¸‰ì²˜ì¹˜ì‹¤', 'ìë™ì‹¬ì¥ì¶©ê²©ê¸°', 'ì˜ë£Œì§„ ëŒ€ê¸°']
                },
                {
                    name: 'ì—¬ìˆ˜ ì˜¤ë™ë„',
                    lat: 34.7465, lng: 127.7699,
                    safetyScore: 84,
                    type: 'coastal',
                    features: ['í•´ì–‘ê²½ì°°ì„œ ì¸ì ‘', 'ì‘ê¸‰ì‹¤ 15ë¶„', 'êµ¬ê¸‰ì°¨ ìƒì‹œ ëŒ€ê¸°']
                },
                {
                    name: 'ì „ì£¼ í•œì˜¥ë§ˆì„',
                    lat: 35.8150, lng: 127.1530,
                    safetyScore: 91,
                    type: 'cultural',
                    features: ['ë„ë³´ 5ë¶„ ì¢…í•©ë³‘ì›', '119ì•ˆì „ì„¼í„°', 'ì˜ë£Œì§„ ìˆœì°°']
                }
            ];
            
            // ë§ˆì»¤ë¥¼ í•˜ë‚˜ì”© ì¶”ê°€ (ë Œë”ë§ ìµœì í™”)
            demoPlaces.forEach((place, index) => {
                setTimeout(() => {
                    addSafetyMarker(place);
                }, index * 200); // 200ms ê°„ê²©ìœ¼ë¡œ ìˆœì°¨ ì¶”ê°€
            });
            
            // ì¶”ì²œ ê´€ê´‘ì§€ ì¹´ë“œ ìƒì„±
            setTimeout(() => {
                displayRecommendedPlaces(demoPlaces);
            }, 1000);
            
            // ì˜ë£Œì‹œì„¤ ë¡œë“œ (ë” ì§€ì—°)
            setTimeout(() => {
                addMedicalFacilities();
            }, 2000);
            
            console.log('ë°ëª¨ ë°ì´í„° ë¡œë“œ ì™„ë£Œ');
        }
        
        // ì•ˆì „ ë§ˆì»¤ ì¶”ê°€ (ìµœì í™”)
        function addSafetyMarker(place) {
            try {
                const position = new kakao.maps.LatLng(place.lat, place.lng);
                
                // ì•ˆì „ë„ì— ë”°ë¥¸ ë§ˆì»¤ ìƒ‰ìƒ
                let markerColor = '#4CAF50'; // ê¸°ë³¸ ë…¹ìƒ‰
                if (place.safetyScore >= 90) markerColor = '#4CAF50'; // í”„ë¦¬ë¯¸ì—„ - ë…¹ìƒ‰
                else if (place.safetyScore >= 80) markerColor = '#2196F3'; // ìš°ìˆ˜ - íŒŒë‘
                else if (place.safetyScore >= 70) markerColor = '#FFC107'; // ì–‘í˜¸ - ë…¸ë‘
                else markerColor = '#FF9800'; // ê¸°ë³¸ - ì£¼í™©
                
                // ê°„ë‹¨í•œ ë§ˆì»¤ ìƒì„± (ì„±ëŠ¥ ìµœì í™”)
                const markerContent = `
                    <div style="
                        background: ${markerColor};
                        color: white;
                        padding: 6px 10px;
                        border-radius: 15px;
                        font-size: 11px;
                        font-weight: bold;
                        box-shadow: 0 2px 8px rgba(0,0,0,0.3);
                        white-space: nowrap;
                        cursor: pointer;
                        border: 2px solid white;
                    ">
                        ğŸ† ${place.safetyScore}ì 
                    </div>
                `;
                
                const customOverlay = new kakao.maps.CustomOverlay({
                    position: position,
                    content: markerContent,
                    yAnchor: 1
                });
                
                customOverlay.setMap(map);
                
                // í´ë¦­ ì´ë²¤íŠ¸ (ì´ë²¤íŠ¸ ìœ„ì„ ë°©ì‹)
                const overlayElement = customOverlay.getContent();
                overlayElement.addEventListener('click', function(e) {
                    e.stopPropagation();
                    showPlaceInfo(place, position);
                });
                
                markers.push({ overlay: customOverlay, data: place });
                
            } catch (error) {
                console.error('ë§ˆì»¤ ì¶”ê°€ ì˜¤ë¥˜:', error);
            }
        }
        
        // ì¥ì†Œ ì •ë³´ í‘œì‹œ (ì„±ëŠ¥ ìµœì í™”)
        function showPlaceInfo(place, position) {
            try {
                // ê¸°ì¡´ ì •ë³´ì°½ ì œê±°
                if (window.currentInfoWindow) {
                    window.currentInfoWindow.close();
                }
                
                const infoContent = `
                    <div class="info-window p-4 bg-white rounded-lg shadow-lg">
                        <div class="mb-3">
                            <h3 class="text-lg font-bold text-blue-600">${place.name}</h3>
                            <div class="flex items-center mt-2">
                                <span class="bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs font-medium mr-2">
                                    ğŸ† ${place.safetyScore}ì 
                                </span>
                                <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs font-medium">
                                    ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ ê°€ì¡± ì¶”ì²œ
                                </span>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <h4 class="font-semibold text-gray-700 mb-2">ğŸ›¡ï¸ ì•ˆì‹¬ í¬ì¸íŠ¸</h4>
                            <ul class="text-sm text-gray-600 space-y-1">
                                ${place.features.map(feature => `<li>âœ… ${feature}</li>`).join('')}
                            </ul>
                        </div>
                        
                        <div class="mb-3">
                            <p class="text-sm text-gray-600">
                                ì „ë¬¸ ì˜ë£Œì§„ê³¼ ì™„ë²½í•œ ì•ˆì „ ì‹œì„¤ë¡œ ê°€ì¡± ëª¨ë‘ê°€ ì•ˆì‹¬í•˜ê³  ì¦ê¸¸ ìˆ˜ ìˆëŠ” ì—¬í–‰ì§€ì…ë‹ˆë‹¤!
                            </p>
                        </div>
                        
                        <div class="flex gap-2">
                            <button onclick="addToTravelPlan('${place.name}')" class="flex-1 bg-blue-500 text-white py-2 px-3 rounded-lg text-sm hover:bg-blue-600">
                                ğŸ˜Š ì—¬í–‰ ê³„íšì— ì¶”ê°€
                            </button>
                            <button onclick="showEmergencyInfo('${place.name}')" class="flex-1 bg-green-500 text-white py-2 px-3 rounded-lg text-sm hover:bg-green-600">
                                ğŸ“ ì•ˆì‹¬ ìƒë‹´
                            </button>
                        </div>
                    </div>
                `;
                
                const infoWindow = new kakao.maps.InfoWindow({
                    content: infoContent,
                    removable: true
                });
                
                // ì„ì‹œ ë§ˆì»¤ ìƒì„± (ì •ë³´ì°½ í‘œì‹œìš©)
                const tempMarker = new kakao.maps.Marker({ position: position });
                infoWindow.open(map, tempMarker);
                
                // ì „ì—­ì— ì €ì¥ (ë‹¤ìŒë²ˆì— ë‹«ê¸° ìœ„í•´)
                window.currentInfoWindow = infoWindow;
                
            } catch (error) {
                console.error('ì •ë³´ì°½ í‘œì‹œ ì˜¤ë¥˜:', error);
            }
        }
        
        // ì˜ë£Œì‹œì„¤ ì¶”ê°€ (ìµœì í™” - ì ì€ ìˆ˜ëŸ‰)
        function addMedicalFacilities() {
            try {
                // ì£¼ìš” ë³‘ì›ë§Œ í‘œì‹œ (ì„±ëŠ¥ ìµœì í™”)
                const hospitals = [
                    { name: 'ì„œìš¸ëŒ€í•™êµë³‘ì›', lat: 37.5800, lng: 126.9675, type: 'hospital' },
                    { name: 'ì‚¼ì„±ì„œìš¸ë³‘ì›', lat: 37.4881, lng: 127.0856, type: 'hospital' },
                    { name: 'ê°•ë‚¨ì„¸ë¸Œë€ìŠ¤ë³‘ì›', lat: 37.5072, lng: 127.0595, type: 'hospital' }
                ];
                
                // ì£¼ìš” AEDë§Œ í‘œì‹œ
                const aeds = [
                    { name: 'ì„œìš¸ì—­ AED', lat: 37.5547, lng: 126.9706, type: 'aed' },
                    { name: 'ê°•ë‚¨ì—­ AED', lat: 37.4981, lng: 127.0276, type: 'aed' }
                ];
                
                // ë³‘ì› ë§ˆì»¤ ì¶”ê°€
                hospitals.forEach(hospital => {
                    const position = new kakao.maps.LatLng(hospital.lat, hospital.lng);
                    const markerContent = `<div class="marker-hospital">ğŸ¥</div>`;
                    
                    const customOverlay = new kakao.maps.CustomOverlay({
                        position: position,
                        content: markerContent,
                        yAnchor: 1
                    });
                    
                    customOverlay.setMap(map);
                    markers.push({ overlay: customOverlay, data: hospital });
                });
                
                // AED ë§ˆì»¤ ì¶”ê°€
                aeds.forEach(aed => {
                    const position = new kakao.maps.LatLng(aed.lat, aed.lng);
                    const markerContent = `<div class="marker-aed">âš¡</div>`;
                    
                    const customOverlay = new kakao.maps.CustomOverlay({
                        position: position,
                        content: markerContent,
                        yAnchor: 1
                    });
                    
                    customOverlay.setMap(map);
                    markers.push({ overlay: customOverlay, data: aed });
                });
                
                // ì¹´ìš´íŠ¸ ì—…ë°ì´íŠ¸
                document.getElementById('hospitalCount').textContent = hospitals.length;
                document.getElementById('aedCount').textContent = aeds.length;
                document.getElementById('pharmacyCount').textContent = '24';
                
            } catch (error) {
                console.error('ì˜ë£Œì‹œì„¤ ë§ˆì»¤ ì¶”ê°€ ì˜¤ë¥˜:', error);
            }
        }
        
        // UI ì´ˆê¸°í™”
        function initializeUI() {
            // í˜„ì¬ ìœ„ì¹˜ ë²„íŠ¼
            document.getElementById('currentLocationBtn').addEventListener('click', function() {
                if (navigator.geolocation) {
                    showNotification('í˜„ì¬ ìœ„ì¹˜ë¥¼ í™•ì¸í•˜ëŠ” ì¤‘... ğŸ“');
                    
                    navigator.geolocation.getCurrentPosition(
                        function(position) {
                            const lat = position.coords.latitude;
                            const lng = position.coords.longitude;
                            const latlng = new kakao.maps.LatLng(lat, lng);
                            
                            map.setCenter(latlng);
                            map.setLevel(5);
                            
                            // í˜„ì¬ ìœ„ì¹˜ ë§ˆì»¤
                            const markerContent = `
                                <div style="
                                    background: #FF5722;
                                    color: white;
                                    padding: 8px 12px;
                                    border-radius: 20px;
                                    font-size: 12px;
                                    font-weight: bold;
                                    box-shadow: 0 2px 10px rgba(255,87,34,0.5);
                                    border: 2px solid white;
                                ">
                                    ğŸ“ ë‚´ ìœ„ì¹˜
                                </div>
                            `;
                            
                            const currentLocationOverlay = new kakao.maps.CustomOverlay({
                                position: latlng,
                                content: markerContent,
                                yAnchor: 1
                            });
                            
                            currentLocationOverlay.setMap(map);
                            showLocationSafety(latlng);
                            showNotification('í˜„ì¬ ìœ„ì¹˜ë¥¼ í™•ì¸í–ˆìŠµë‹ˆë‹¤! ğŸ¯');
                        },
                        function() {
                            showNotification('ìœ„ì¹˜ ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ğŸ˜…');
                        }
                    );
                }
            });
            
            // ê²€ìƒ‰ ê¸°ëŠ¥
            document.getElementById('searchBtn').addEventListener('click', performSearch);
            document.getElementById('searchInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    performSearch();
                }
            });
            
            // ì‘ê¸‰ìƒí™© ëª¨ë‹¬
            document.getElementById('emergencyBtn').addEventListener('click', function() {
                document.getElementById('emergencyModal').classList.remove('hidden');
            });
            
            document.getElementById('closeEmergencyModal').addEventListener('click', function() {
                document.getElementById('emergencyModal').classList.add('hidden');
            });
            
            // ì‘ê¸‰ìƒí™© ë²„íŠ¼ë“¤
            document.querySelectorAll('.emergency-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const type = this.dataset.emergency;
                    handleEmergency(type);
                });
            });
            
            document.getElementById('call119').addEventListener('click', function() {
                if (confirm('119ì— ì‹ ê³ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?\n\nì‹¤ì œ ì‘ê¸‰ìƒí™©ì—ì„œëŠ” ì¦‰ì‹œ 119ì— ì‹ ê³ í•˜ì„¸ìš”.\n\ní˜„ì¬ëŠ” ë°ëª¨ ë²„ì „ì…ë‹ˆë‹¤.')) {
                    showNotification('119 ì‹ ê³ ê°€ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤ ğŸš¨');
                }
            });
            
            // í™˜ì˜ ë©”ì‹œì§€ (ì§€ì—°)
            setTimeout(() => {
                showNotification('ì•ˆì‹¬ì—¬í–‰ ìŠ¤í…ì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤! ğŸ‰');
            }, 2000);
            
            // ì‹¤ì‹œê°„ ì•ˆì „ ì•Œë¦¼ (ë” ì§€ì—°)
            setTimeout(() => {
                showSafetyAlerts();
            }, 4000);
        }
        
        // ê²€ìƒ‰ ìˆ˜í–‰
        function performSearch() {
            const query = document.getElementById('searchInput').value.trim();
            if (!query) return;
            
            showNotification('ê²€ìƒ‰ ì¤‘... ğŸ”');
            
            try {
                const ps = new kakao.maps.services.Places();
                ps.keywordSearch(query, function(data, status, pagination) {
                    if (status === kakao.maps.services.Status.OK) {
                        const place = data[0];
                        const position = new kakao.maps.LatLng(place.y, place.x);
                        
                        map.setCenter(position);
                        map.setLevel(5);
                        
                        showLocationSafety(position);
                        showNotification(`${place.place_name}ì„(ë¥¼) ì°¾ì•˜ìŠµë‹ˆë‹¤! ğŸ‰`);
                    } else {
                        showNotification('ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤. ë‹¤ë¥¸ í‚¤ì›Œë“œë¡œ ì‹œë„í•´ë³´ì„¸ìš”. ğŸ”');
                    }
                });
            } catch (error) {
                console.error('ê²€ìƒ‰ ì˜¤ë¥˜:', error);
                showNotification('ê²€ìƒ‰ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”. âš ï¸');
            }
        }
        
        // ìœ„ì¹˜ ì•ˆì „ë„ í‘œì‹œ
        function showLocationSafety(latlng) {
            const safetyScore = Math.floor(Math.random() * 20) + 80; // 80-99 ì 
            const section = document.getElementById('currentSafetySection');
            
            document.getElementById('safetyScore').textContent = safetyScore;
            document.getElementById('nearestHospital').textContent = Math.floor(Math.random() * 5) + 2 + 'ë¶„ ê±°ë¦¬';
            document.getElementById('nearestAED').textContent = Math.floor(Math.random() * 3) + 1 + 'ë¶„ ê±°ë¦¬';
            document.getElementById('nearestPharmacy').textContent = Math.floor(Math.random() * 5) + 3 + 'ë¶„ ê±°ë¦¬';
            
            section.classList.remove('hidden');
        }
        
        // ì¶”ì²œ ê´€ê´‘ì§€ ì¹´ë“œ í‘œì‹œ
        function displayRecommendedPlaces(places) {
            const container = document.getElementById('recommendedPlaces');
            container.innerHTML = ''; // ìŠ¤ì¼ˆë ˆí†¤ ì œê±°
            
            places.forEach((place, index) => {
                setTimeout(() => {
                    const card = createPlaceCard(place);
                    container.appendChild(card);
                }, index * 300); // ìˆœì°¨ì ìœ¼ë¡œ ë‚˜íƒ€ë‚˜ëŠ” íš¨ê³¼
            });
        }
        
        // ì¥ì†Œ ì¹´ë“œ ìƒì„±
        function createPlaceCard(place) {
            const card = document.createElement('div');
            card.className = 'bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-shadow fade-in';
            
            const safetyLevel = place.safetyScore >= 90 ? 'premium' : 
                              place.safetyScore >= 80 ? 'excellent' : 'good';
            const badgeColors = {
                premium: 'bg-green-100 text-green-800',
                excellent: 'bg-blue-100 text-blue-800',
                good: 'bg-yellow-100 text-yellow-800'
            };
            const badgeTexts = {
                premium: 'ğŸ† í”„ë¦¬ë¯¸ì—„ ì•ˆì‹¬',
                excellent: 'ğŸ¥‡ ìš°ìˆ˜ ì•ˆì‹¬',
                good: 'âœ… ì•ˆì‹¬ ë³´ì¥'
            };
            
            card.innerHTML = `
                <div class="h-48 bg-gradient-to-br from-blue-400 to-purple-500 flex items-center justify-center text-white text-4xl">
                    ${getPlaceEmoji(place.type)}
                </div>
                <div class="p-5">
                    <div class="flex items-start justify-between mb-3">
                        <h3 class="text-lg font-semibold text-gray-800">${place.name}</h3>
                        <span class="${badgeColors[safetyLevel]} px-2 py-1 rounded-full text-xs font-medium">
                            ${badgeTexts[safetyLevel]}
                        </span>
                    </div>
                    
                    <div class="mb-3">
                        <div class="flex items-center mb-2">
                            <span class="text-2xl font-bold text-green-600">${place.safetyScore}</span>
                            <span class="text-gray-500 ml-1">/100ì </span>
                            <div class="flex-1 ml-3 bg-gray-200 rounded-full h-2">
                                <div class="bg-green-500 h-2 rounded-full transition-all duration-1000" style="width: ${place.safetyScore}%"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mb-4">
                        <h4 class="text-sm font-medium text-gray-700 mb-2">ğŸ›¡ï¸ ì•ˆì‹¬ í¬ì¸íŠ¸</h4>
                        <div class="space-y-1">
                            ${place.features.slice(0, 2).map(feature => 
                                `<div class="text-xs text-gray-600">âœ… ${feature}</div>`
                            ).join('')}
                        </div>
                    </div>
                    
                    <button onclick="moveToPlace(${place.lat}, ${place.lng}, '${place.name}')" 
                            class="w-full bg-blue-500 text-white py-2 px-4 rounded-lg hover:bg-blue-600 transition-colors">
                        ğŸ˜Š ì•ˆì‹¬í•˜ê³  ë– ë‚˜ê¸°
                    </button>
                </div>
            `;
            
            return card;
        }
        
        // ì¥ì†Œ íƒ€ì…ë³„ ì´ëª¨ì§€
        function getPlaceEmoji(type) {
            const emojis = {
                mountain: 'ğŸ”ï¸',
                beach: 'ğŸ–ï¸',
                cultural: 'ğŸ›ï¸',
                coastal: 'ğŸŒŠ',
                city: 'ğŸ™ï¸'
            };
            return emojis[type] || 'ğŸ“';
        }
        
        // ì¥ì†Œë¡œ ì´ë™
        function moveToPlace(lat, lng, name) {
            try {
                const position = new kakao.maps.LatLng(lat, lng);
                map.setCenter(position);
                map.setLevel(5);
                
                showLocationSafety(position);
                showNotification(`${name}ë¡œ ì´ë™í–ˆìŠµë‹ˆë‹¤. ì™„ë²½í•œ ì•ˆì‹¬ ì§€ì—­ì´ë„¤ìš”! ğŸŒŸ`);
            } catch (error) {
                console.error('ì¥ì†Œ ì´ë™ ì˜¤ë¥˜:', error);
            }
        }
        
        // ì—¬í–‰ ê³„íšì— ì¶”ê°€
        function addToTravelPlan(placeName) {
            showNotification(`${placeName}ì´(ê°€) ì—¬í–‰ ê³„íšì— ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤! âœ…`);
        }
        
        // ì•ˆì‹¬ ìƒë‹´
        function showEmergencyInfo(placeName) {
            alert(`${placeName} ì•ˆì‹¬ ìƒë‹´\n\nğŸ“ ì‘ê¸‰ìƒí™© ì‹œ ì—°ë½ì²˜:\n- 119 (ì‘ê¸‰ìƒí™©)\n- ì§€ì—­ ë³´ê±´ì†Œ: 1339\n- ê´€ê´‘ì•ˆë‚´ì†Œ: 1330\n\nğŸ¥ ì£¼ë³€ ì£¼ìš” ë³‘ì›:\n- 24ì‹œê°„ ì‘ê¸‰ì‹¤ ìš´ì˜\n- ì „ë¬¸ì˜ ìƒì£¼\n- êµ¬ê¸‰ì°¨ ëŒ€ê¸°`);
        }
        
        // ì‘ê¸‰ìƒí™© ì²˜ë¦¬
        function handleEmergency(type) {
            const emergencyInfo = {
                chest_pain: { hospital: 'ì‹¬ì¥ë‚´ê³¼', time: '3ë¶„', name: 'ê°•ë‚¨ì„¸ë¸Œë€ìŠ¤ë³‘ì›' },
                unconscious: { hospital: 'ì‘ê¸‰ì‹¤', time: '2ë¶„', name: 'ì‚¼ì„±ì„œìš¸ë³‘ì›' },
                bleeding: { hospital: 'ì™¸ìƒì™¸ê³¼', time: '4ë¶„', name: 'ì„œìš¸ì•„ì‚°ë³‘ì›' },
                other: { hospital: 'ì‘ê¸‰ì‹¤', time: '5ë¶„', name: 'ì„œìš¸ëŒ€í•™êµë³‘ì›' }
            };
            
            const info = emergencyInfo[type];
            alert(`ğŸš¨ ì‘ê¸‰ìƒí™© ëŒ€ì‘ ì•ˆë‚´\n\nê°€ì¥ ì í•©í•œ ë³‘ì›: ${info.name}\nì „ë¬¸ê³¼: ${info.hospital}\nì˜ˆìƒ ë„ì°©ì‹œê°„: ${info.time}\n\nì¦‰ì‹œ 119ì— ì‹ ê³ í•˜ê³  ë³‘ì›ìœ¼ë¡œ ì´ë™í•˜ì„¸ìš”.`);
            
            document.getElementById('emergencyModal').classList.add('hidden');
            showNotification(`${info.name} ê¸¸ì•ˆë‚´ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤ ğŸš—`);
        }
        
        // ì•Œë¦¼ í‘œì‹œ (ì„±ëŠ¥ ìµœì í™”)
        function showNotification(message, duration = 3000) {
            // ê¸°ì¡´ ì•Œë¦¼ ì œê±°
            const existingNotification = document.querySelector('.notification-toast');
            if (existingNotification) {
                existingNotification.remove();
            }
            
            const notification = document.createElement('div');
            notification.className = 'notification-toast fixed top-20 right-4 bg-green-500 text-white px-4 py-3 rounded-lg shadow-lg z-50 transform translate-x-full transition-transform duration-300';
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            // ì• ë‹ˆë©”ì´ì…˜
            setTimeout(() => {
                notification.style.transform = 'translateX(0)';
            }, 100);
            
            // ìë™ ì œê±°
            setTimeout(() => {
                notification.style.transform = 'translateX(100%)';
                setTimeout(() => notification.remove(), 300);
            }, duration);
        }
        
        // ì•ˆì „ ì•Œë¦¼ í‘œì‹œ
        function showSafetyAlerts() {
            const alerts = [
                {
                    type: 'positive',
                    message: 'ì „êµ­ ê´€ê´‘ì§€ ì•ˆì „ë„ í‰ê·  87ì  ë‹¬ì„±! ì•ˆì‹¬í•˜ê³  ì—¬í–‰í•˜ì„¸ìš” ğŸŒŸ',
                    time: 'ë°©ê¸ˆ ì „'
                },
                {
                    type: 'info',
                    message: 'ì´ë²ˆ ì£¼ë§ ë‚ ì”¨ ì¢‹ìŒ. ì•¼ì™¸ í™œë™í•˜ê¸° ìµœì ì˜ ì¡°ê±´ì…ë‹ˆë‹¤ â˜€ï¸',
                    time: '10ë¶„ ì „'
                }
            ];
            
            const alertsSection = document.getElementById('safetyAlerts');
            const alertsList = document.getElementById('alertsList');
            
            alerts.forEach(alert => {
                const alertDiv = document.createElement('div');
                alertDiv.className = 'bg-white bg-opacity-20 rounded-lg p-3 mb-2';
                alertDiv.innerHTML = `
                    <div class="flex items-start space-x-3">
                        <div class="text-xl">
                            ${alert.type === 'positive' ? 'âœ…' : 'â„¹ï¸'}
                        </div>
                        <div class="flex-1">
                            <p class="text-sm font-medium">${alert.message}</p>
                            <p class="text-xs opacity-75 mt-1">${alert.time}</p>
                        </div>
                    </div>
                `;
                alertsList.appendChild(alertDiv);
            });
            
            alertsSection.classList.remove('hidden');
        }
        
        // ì•± ì‹œì‘
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM ë¡œë“œ ì™„ë£Œ, ì•± ì´ˆê¸°í™” ì‹œì‘');
            initializeApp();
        });
        
        // ì˜¤ë¥˜ ì²˜ë¦¬
        window.addEventListener('error', function(e) {
            console.error('ì „ì—­ ì˜¤ë¥˜:', e.error);
        });
        
        window.addEventListener('unhandledrejection', function(e) {
            console.error('ì²˜ë¦¬ë˜ì§€ ì•Šì€ Promise ê±°ë¶€:', e.reason);
        });
    </script>
</body>
</html>