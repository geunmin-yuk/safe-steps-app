<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#2196F3">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="ÏïàÏã¨Ïó¨Ìñâ">
    
    <title>ÏïàÏã¨Ïó¨Ìñâ Ïä§ÌÖù - Î™®Î∞îÏùº</title>
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    
    <!-- Apple Icons -->
    <link rel="apple-touch-icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cpath fill='%232196F3' d='M50 10c-22.1 0-40 17.9-40 40s17.9 40 40 40 40-17.9 40-40-17.9-40-40-40z'/%3E%3Cpath fill='white' d='M50 20c-16.6 0-30 13.4-30 30s13.4 30 30 30 30-13.4 30-30-13.4-30-30-30z'/%3E%3Cpath fill='%234CAF50' d='M50 30c-11 0-20 9-20 20s9 20 20 20 20-9 20-20-9-20-20-20z'/%3E%3Ctext x='50' y='58' text-anchor='middle' font-size='20' fill='white'%3E‚úà%3C/text%3E%3C/svg%3E">
    
    <!-- Ïπ¥Ïπ¥Ïò§Îßµ API -->
    <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=cb042192382ed6a341ff3f2649753c8f&libraries=services"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        /* Î™®Î∞îÏùº ÏµúÏ†ÅÌôî Ïä§ÌÉÄÏùº */
        html, body {
            height: 100%;
            overflow-x: hidden;
            touch-action: manipulation;
        }
        
        .app-container {
            height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            border-top: 1px solid #e5e7eb;
            z-index: 1000;
            padding-bottom: env(safe-area-inset-bottom);
        }
        
        .map-container {
            flex: 1;
            position: relative;
        }
        
        .floating-btn {
            position: fixed;
            z-index: 100;
            border-radius: 50%;
            width: 56px;
            height: 56px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            color: white;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .floating-btn:active {
            transform: scale(0.95);
        }
        
        .emergency-btn {
            bottom: 100px;
            right: 20px;
            background: linear-gradient(135deg, #f44336, #d32f2f);
            animation: pulse-red 2s infinite;
        }
        
        .location-btn {
            bottom: 170px;
            right: 20px;
            background: linear-gradient(135deg, #2196F3, #1976D2);
        }
        
        .search-btn {
            bottom: 240px;
            right: 20px;
            background: linear-gradient(135deg, #4CAF50, #388E3C);
        }
        
        @keyframes pulse-red {
            0%, 100% { box-shadow: 0 4px 12px rgba(244, 67, 54, 0.3); }
            50% { box-shadow: 0 4px 20px rgba(244, 67, 54, 0.6); }
        }
        
        .safety-overlay {
            position: absolute;
            top: 20px;
            left: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            padding: 16px;
            z-index: 50;
            border: 1px solid rgba(255, 255, 255, 0.5);
        }
        
        .bottom-sheet {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            border-top-left-radius: 20px;
            border-top-right-radius: 20px;
            transform: translateY(100%);
            transition: transform 0.3s ease;
            z-index: 200;
            max-height: 70vh;
            overflow-y: auto;
            padding-bottom: env(safe-area-inset-bottom);
        }
        
        .bottom-sheet.show {
            transform: translateY(0);
        }
        
        .bottom-sheet-handle {
            width: 40px;
            height: 4px;
            background: #ccc;
            border-radius: 2px;
            margin: 12px auto 8px;
        }
        
        .marker-custom {
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
            border-radius: 20px;
            padding: 4px 8px;
            font-size: 12px;
            font-weight: bold;
            box-shadow: 0 2px 10px rgba(76, 175, 80, 0.5);
            border: 2px solid white;
        }
        
        .marker-hospital {
            background: linear-gradient(135deg, #2196F3, #1976D2);
            color: white;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            box-shadow: 0 2px 10px rgba(33, 150, 243, 0.5);
            border: 2px solid white;
        }
        
        .marker-aed {
            background: linear-gradient(135deg, #f44336, #d32f2f);
            color: white;
            border-radius: 50%;
            width: 26px;
            height: 26px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            box-shadow: 0 2px 10px rgba(244, 67, 54, 0.5);
            border: 2px solid white;
        }
        
        .install-prompt {
            position: fixed;
            bottom: 80px;
            left: 20px;
            right: 20px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 16px;
            border-radius: 12px;
            display: none;
            z-index: 150;
        }
        
        @media (max-height: 600px) {
            .emergency-btn { bottom: 80px; }
            .location-btn { bottom: 140px; }
            .search-btn { bottom: 200px; }
        }
        
        /* ÌÑ∞Ïπò ÌîºÎìúÎ∞± */
        .touch-feedback:active {
            transform: scale(0.98);
            opacity: 0.8;
        }
        
        /* ÏïàÏ†Ñ Ï†êÏàò Ïï†ÎãàÎ©îÏù¥ÏÖò */
        .score-circle {
            position: relative;
            width: 80px;
            height: 80px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: conic-gradient(#4CAF50 0% var(--score-percent), #e5e7eb var(--score-percent) 100%);
            padding: 4px;
        }
        
        .score-inner {
            width: 100%;
            height: 100%;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }
    </style>
</head>
<body class="bg-gray-100 select-none">
    <div class="app-container">
        <!-- ÏïàÏ†ÑÎèÑ Ïò§Î≤ÑÎ†àÏù¥ -->
        <div id="safetyOverlay" class="safety-overlay hidden">
            <div class="flex items-center space-x-3">
                <div class="score-circle" style="--score-percent: 95%">
                    <div class="score-inner">
                        <span class="text-lg font-bold text-green-600" id="currentScore">95</span>
                        <span class="text-xs text-gray-500">Ï†ê</span>
                    </div>
                </div>
                <div class="flex-1">
                    <div class="flex items-center mb-1">
                        <span class="text-green-600 text-lg mr-2">üõ°Ô∏è</span>
                        <span class="font-bold text-green-800">ÏôÑÎ≤ΩÌïú ÏïàÏã¨ ÏßÄÏó≠</span>
                    </div>
                    <div class="text-sm text-gray-600">
                        <div class="flex items-center space-x-4 text-xs">
                            <span>üè• 2Î∂Ñ</span>
                            <span>‚ö° 1Î∂Ñ</span>
                            <span>üíä 3Î∂Ñ</span>
                        </div>
                    </div>
                </div>
                <button id="closeOverlay" class="text-gray-400 hover:text-gray-600">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        </div>
        
        <!-- ÏßÄÎèÑ Ïª®ÌÖåÏù¥ÎÑà -->
        <div class="map-container">
            <div id="map" class="w-full h-full"></div>
        </div>
        
        <!-- ÌîåÎ°úÌåÖ Î≤ÑÌäºÎì§ -->
        <button id="emergencyFloatingBtn" class="floating-btn emergency-btn touch-feedback">
            <i class="fas fa-phone"></i>
        </button>
        
        <button id="locationFloatingBtn" class="floating-btn location-btn touch-feedback">
            <i class="fas fa-location-dot"></i>
        </button>
        
        <button id="searchFloatingBtn" class="floating-btn search-btn touch-feedback">
            <i class="fas fa-search"></i>
        </button>
        
        <!-- ÌïòÎã® ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò -->
        <nav class="bottom-nav">
            <div class="flex justify-around items-center py-2">
                <button id="navMap" class="nav-btn flex flex-col items-center py-2 px-3 text-blue-600 touch-feedback">
                    <i class="fas fa-map text-lg"></i>
                    <span class="text-xs mt-1">ÏßÄÎèÑ</span>
                </button>
                <button id="navRecommend" class="nav-btn flex flex-col items-center py-2 px-3 text-gray-400 touch-feedback">
                    <i class="fas fa-star text-lg"></i>
                    <span class="text-xs mt-1">Ï∂îÏ≤ú</span>
                </button>
                <button id="navFamily" class="nav-btn flex flex-col items-center py-2 px-3 text-gray-400 touch-feedback">
                    <i class="fas fa-users text-lg"></i>
                    <span class="text-xs mt-1">Í∞ÄÏ°±</span>
                </button>
                <button id="navSafety" class="nav-btn flex flex-col items-center py-2 px-3 text-gray-400 touch-feedback">
                    <i class="fas fa-shield-check text-lg"></i>
                    <span class="text-xs mt-1">ÏïàÏ†Ñ</span>
                </button>
                <button id="navMore" class="nav-btn flex flex-col items-center py-2 px-3 text-gray-400 touch-feedback">
                    <i class="fas fa-ellipsis-h text-lg"></i>
                    <span class="text-xs mt-1">ÎçîÎ≥¥Í∏∞</span>
                </button>
            </div>
        </nav>
        
        <!-- Í≤ÄÏÉâ Î∞îÌÖÄÏãúÌä∏ -->
        <div id="searchBottomSheet" class="bottom-sheet">
            <div class="bottom-sheet-handle"></div>
            <div class="p-4">
                <h3 class="text-lg font-bold text-gray-800 mb-4">
                    <i class="fas fa-search mr-2 text-blue-500"></i>
                    ÏïàÏã¨ Í¥ÄÍ¥ëÏßÄ Í≤ÄÏÉâ
                </h3>
                
                <div class="mb-4">
                    <div class="relative">
                        <input 
                            type="text" 
                            id="mobileSearchInput" 
                            placeholder="Ïñ¥ÎîîÎ°ú Ïó¨ÌñâÍ∞ÄÏãúÎÇòÏöî?"
                            class="w-full px-4 py-3 bg-gray-100 rounded-2xl focus:ring-2 focus:ring-blue-500 focus:bg-white border-0"
                        >
                        <button id="mobileSearchBtn" class="absolute right-3 top-3 text-blue-500">
                            <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                </div>
                
                <div class="mb-6">
                    <h4 class="text-sm font-medium text-gray-700 mb-3">Ïù∏Í∏∞ Í≤ÄÏÉâÏñ¥</h4>
                    <div class="flex flex-wrap gap-2">
                        <button class="search-tag bg-blue-100 text-blue-800 px-3 py-2 rounded-full text-sm touch-feedback" data-search="Ï†úÏ£ºÎèÑ">Ï†úÏ£ºÎèÑ</button>
                        <button class="search-tag bg-green-100 text-green-800 px-3 py-2 rounded-full text-sm touch-feedback" data-search="ÏÑ§ÏïÖÏÇ∞">ÏÑ§ÏïÖÏÇ∞</button>
                        <button class="search-tag bg-purple-100 text-purple-800 px-3 py-2 rounded-full text-sm touch-feedback" data-search="Î∂ÄÏÇ∞">Î∂ÄÏÇ∞</button>
                        <button class="search-tag bg-yellow-100 text-yellow-800 px-3 py-2 rounded-full text-sm touch-feedback" data-search="Í≤ΩÏ£º">Í≤ΩÏ£º</button>
                        <button class="search-tag bg-pink-100 text-pink-800 px-3 py-2 rounded-full text-sm touch-feedback" data-search="Ïó¨Ïàò">Ïó¨Ïàò</button>
                        <button class="search-tag bg-indigo-100 text-indigo-800 px-3 py-2 rounded-full text-sm touch-feedback" data-search="Ï†ÑÏ£º">Ï†ÑÏ£º</button>
                    </div>
                </div>
                
                <div>
                    <h4 class="text-sm font-medium text-gray-700 mb-3">ÏµúÍ∑º Í≤ÄÏÉâ</h4>
                    <div id="recentSearches" class="space-y-2">
                        <!-- ÏµúÍ∑º Í≤ÄÏÉâÏñ¥Îì§Ïù¥ Ïó¨Í∏∞Ïóê ÎèôÏ†ÅÏúºÎ°ú Ï∂îÍ∞ÄÎê©ÎãàÎã§ -->
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Ï∂îÏ≤ú Î∞îÌÖÄÏãúÌä∏ -->
        <div id="recommendBottomSheet" class="bottom-sheet">
            <div class="bottom-sheet-handle"></div>
            <div class="p-4">
                <h3 class="text-lg font-bold text-gray-800 mb-4">
                    <i class="fas fa-star mr-2 text-yellow-500"></i>
                    Ïù¥Î≤à Ï£ºÎßê Ï∂îÏ≤ú Ïó¨ÌñâÏßÄ
                </h3>
                
                <div id="mobileRecommendedPlaces" class="space-y-4">
                    <!-- Ï∂îÏ≤ú Ïû•ÏÜåÎì§Ïù¥ Ïó¨Í∏∞Ïóê ÎèôÏ†ÅÏúºÎ°ú Ï∂îÍ∞ÄÎê©ÎãàÎã§ -->
                </div>
            </div>
        </div>
        
        <!-- Í∞ÄÏ°± Î∞îÌÖÄÏãúÌä∏ -->
        <div id="familyBottomSheet" class="bottom-sheet">
            <div class="bottom-sheet-handle"></div>
            <div class="p-4">
                <h3 class="text-lg font-bold text-gray-800 mb-4">
                    <i class="fas fa-users mr-2 text-purple-500"></i>
                    Í∞ÄÏ°± Ïó¨Ìñâ ÏÑ§Ï†ï
                </h3>
                
                <div class="mb-6">
                    <h4 class="text-sm font-medium text-gray-700 mb-3">Ïö∞Î¶¨ Í∞ÄÏ°± Íµ¨ÏÑ±Ïõê</h4>
                    <div class="space-y-3">
                        <div class="family-member bg-gray-50 rounded-lg p-3">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-3">
                                    <div class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center">
                                        <span class="text-sm">üë¥</span>
                                    </div>
                                    <div>
                                        <div class="text-sm font-medium">Ìï†ÏïÑÎ≤ÑÏßÄ (78ÏÑ∏)</div>
                                        <div class="text-xs text-gray-500">Í¥ÄÏ†à, Í≥†ÌòàÏïï</div>
                                    </div>
                                </div>
                                <button class="text-red-500 text-sm">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                        </div>
                        
                        <div class="family-member bg-gray-50 rounded-lg p-3">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-3">
                                    <div class="w-8 h-8 bg-pink-100 rounded-full flex items-center justify-center">
                                        <span class="text-sm">üë∂</span>
                                    </div>
                                    <div>
                                        <div class="text-sm font-medium">ÏïÑÍ∏∞ (2ÏÑ∏)</div>
                                        <div class="text-xs text-gray-500">ÏÜåÏïÑÍ≥º ÌïÑÏàò</div>
                                    </div>
                                </div>
                                <button class="text-red-500 text-sm">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <button class="w-full mt-3 py-3 border-2 border-dashed border-gray-300 rounded-lg text-gray-500 touch-feedback">
                        <i class="fas fa-plus mr-2"></i>
                        Í∞ÄÏ°± Íµ¨ÏÑ±Ïõê Ï∂îÍ∞Ä
                    </button>
                </div>
                
                <div class="mb-4">
                    <h4 class="text-sm font-medium text-gray-700 mb-3">Ïó¨Ìñâ Ïä§ÌÉÄÏùº</h4>
                    <div class="grid grid-cols-2 gap-2">
                        <button class="travel-style-btn bg-blue-500 text-white p-3 rounded-lg text-sm touch-feedback">
                            üèîÔ∏è ÏûêÏó∞ ÌÉêÌóò
                        </button>
                        <button class="travel-style-btn bg-gray-200 text-gray-700 p-3 rounded-lg text-sm touch-feedback">
                            üèõÔ∏è Î¨∏Ìôî Ï≤¥Ìóò
                        </button>
                        <button class="travel-style-btn bg-gray-200 text-gray-700 p-3 rounded-lg text-sm touch-feedback">
                            üçú ÎßõÏßë Ìà¨Ïñ¥
                        </button>
                        <button class="travel-style-btn bg-gray-200 text-gray-700 p-3 rounded-lg text-sm touch-feedback">
                            üßò‚Äç‚ôÄÔ∏è ÌûêÎßÅ Ïó¨Ìñâ
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- ÏïàÏ†Ñ Ï†ïÎ≥¥ Î∞îÌÖÄÏãúÌä∏ -->
        <div id="safetyBottomSheet" class="bottom-sheet">
            <div class="bottom-sheet-handle"></div>
            <div class="p-4">
                <h3 class="text-lg font-bold text-gray-800 mb-4">
                    <i class="fas fa-shield-check mr-2 text-green-500"></i>
                    ÏïàÏ†Ñ Ï†ïÎ≥¥ ÏÑºÌÑ∞
                </h3>
                
                <div class="grid grid-cols-2 gap-3 mb-6">
                    <div class="bg-green-100 p-4 rounded-lg text-center">
                        <div class="text-2xl mb-2">üè•</div>
                        <div class="text-xs text-gray-600">ÏùëÍ∏âÏã§</div>
                        <div class="text-sm font-bold text-green-700">2Î∂Ñ Í±∞Î¶¨</div>
                    </div>
                    <div class="bg-red-100 p-4 rounded-lg text-center">
                        <div class="text-2xl mb-2">‚ö°</div>
                        <div class="text-xs text-gray-600">AED</div>
                        <div class="text-sm font-bold text-red-700">1Î∂Ñ Í±∞Î¶¨</div>
                    </div>
                    <div class="bg-blue-100 p-4 rounded-lg text-center">
                        <div class="text-2xl mb-2">üíä</div>
                        <div class="text-xs text-gray-600">24ÏãúÍ∞Ñ ÏïΩÍµ≠</div>
                        <div class="text-sm font-bold text-blue-700">3Î∂Ñ Í±∞Î¶¨</div>
                    </div>
                    <div class="bg-purple-100 p-4 rounded-lg text-center">
                        <div class="text-2xl mb-2">üë®‚Äç‚öïÔ∏è</div>
                        <div class="text-xs text-gray-600">ÏùòÎ£åÏßÑ ÏÉÅÎã¥</div>
                        <div class="text-sm font-bold text-purple-700">24ÏãúÍ∞Ñ</div>
                    </div>
                </div>
                
                <div class="mb-4">
                    <h4 class="text-sm font-medium text-gray-700 mb-3">Ïò§ÎäòÏùò ÏïàÏ†Ñ ÏïåÎ¶º</h4>
                    <div class="space-y-2">
                        <div class="bg-green-50 border-l-4 border-green-400 p-3 rounded">
                            <div class="flex items-center">
                                <span class="text-green-600 mr-2">‚úÖ</span>
                                <span class="text-sm text-green-800">Ï†ÑÍµ≠ Í¥ÄÍ¥ëÏßÄ ÌèâÍ∑† ÏïàÏ†ÑÎèÑ 87Ï†ê Îã¨ÏÑ±</span>
                            </div>
                        </div>
                        <div class="bg-blue-50 border-l-4 border-blue-400 p-3 rounded">
                            <div class="flex items-center">
                                <span class="text-blue-600 mr-2">‚òÄÔ∏è</span>
                                <span class="text-sm text-blue-800">Ïù¥Î≤à Ï£ºÎßê Ï†ÑÍµ≠ ÎßëÏùå, ÏïºÏô∏ÌôúÎèô ÏµúÏ†Å</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- ÏùëÍ∏âÏÉÅÌô© Î™®Îã¨ -->
        <div id="emergencyModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center p-4">
            <div class="bg-white rounded-2xl max-w-sm w-full p-6">
                <div class="text-center mb-6">
                    <div class="text-6xl text-red-500 mb-4">üö®</div>
                    <h3 class="text-xl font-bold text-gray-800 mb-2">ÏùëÍ∏âÏÉÅÌô© ÎåÄÏùë</h3>
                    <p class="text-gray-600 text-sm">ÏÉÅÌô©ÏùÑ ÏÑ†ÌÉùÌïòÎ©¥ ÏµúÏ†ÅÏùò Î≥ëÏõêÏùÑ ÏïàÎÇ¥Ìï©ÎãàÎã§</p>
                </div>
                
                <div class="space-y-3 mb-6">
                    <button class="emergency-type-btn w-full bg-red-500 text-white p-4 rounded-xl hover:bg-red-600 transition-colors touch-feedback" data-emergency="chest_pain">
                        <i class="fas fa-heart mr-3"></i>Í∞ÄÏä¥ ÌÜµÏ¶ù / Ìò∏Ìù°Í≥§ÎûÄ
                    </button>
                    <button class="emergency-type-btn w-full bg-red-500 text-white p-4 rounded-xl hover:bg-red-600 transition-colors touch-feedback" data-emergency="unconscious">
                        <i class="fas fa-user-injured mr-3"></i>ÏùòÏãùÏûÉÏùå / Ïì∞Îü¨Ïßê
                    </button>
                    <button class="emergency-type-btn w-full bg-red-500 text-white p-4 rounded-xl hover:bg-red-600 transition-colors touch-feedback" data-emergency="bleeding">
                        <i class="fas fa-droplet mr-3"></i>Ïã¨Ìïú Ï∂úÌòà / Ïô∏ÏÉÅ
                    </button>
                    <button class="emergency-type-btn w-full bg-red-500 text-white p-4 rounded-xl hover:bg-red-600 transition-colors touch-feedback" data-emergency="other">
                        <i class="fas fa-exclamation-triangle mr-3"></i>Í∏∞ÌÉÄ ÏùëÍ∏âÏÉÅÌô©
                    </button>
                </div>
                
                <div class="flex space-x-3">
                    <button id="call119Mobile" class="flex-1 bg-green-500 text-white p-3 rounded-xl hover:bg-green-600 transition-colors touch-feedback">
                        <i class="fas fa-phone mr-2"></i>119 Ïã†Í≥†
                    </button>
                    <button id="closeEmergencyModal" class="flex-1 bg-gray-500 text-white p-3 rounded-xl hover:bg-gray-600 transition-colors touch-feedback">
                        Ï∑®ÏÜå
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Ïï± ÏÑ§Ïπò ÌîÑÎ°¨ÌîÑÌä∏ -->
        <div id="installPrompt" class="install-prompt">
            <div class="flex items-center justify-between">
                <div class="flex-1">
                    <div class="font-bold text-sm mb-1">üì± Ïï±ÏúºÎ°ú ÏÑ§ÏπòÌïòÍ∏∞</div>
                    <div class="text-xs opacity-90">Îçî Îπ†Î•¥Í≥† Ìé∏Î¶¨ÌïòÍ≤å Ïù¥Ïö©ÌïòÏÑ∏Ïöî</div>
                </div>
                <div class="flex space-x-2 ml-4">
                    <button id="installApp" class="bg-white text-purple-600 px-3 py-1 rounded-lg text-sm font-medium touch-feedback">
                        ÏÑ§Ïπò
                    </button>
                    <button id="dismissInstall" class="text-white opacity-75 touch-feedback">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Î°úÎî© -->
    <div id="mobileLoading" class="fixed inset-0 bg-white z-50 hidden flex items-center justify-center">
        <div class="text-center">
            <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"></div>
            <p class="text-gray-600">ÏïàÏã¨ Ï†ïÎ≥¥ Î°úÎî© Ï§ë...</p>
        </div>
    </div>

    <script>
        // Ï†ÑÏó≠ Î≥ÄÏàò
        let mobileMap;
        let mobileMarkers = [];
        let currentBottomSheet = null;
        let deferredPrompt;
        
        // PWA Ï¥àÍ∏∞Ìôî
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('service-worker.js')
                    .then(function(registration) {
                        console.log('ServiceWorker registration successful');
                    }, function(err) {
                        console.log('ServiceWorker registration failed');
                    });
            });
        }
        
        // Ïï± ÏÑ§Ïπò ÌîÑÎ°¨ÌîÑÌä∏
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            
            // ÏÑ§Ïπò ÌîÑÎ°¨ÌîÑÌä∏ ÌëúÏãú
            setTimeout(() => {
                document.getElementById('installPrompt').style.display = 'block';
            }, 3000);
        });
        
        // Î™®Î∞îÏùº ÏßÄÎèÑ Ï¥àÍ∏∞Ìôî
        function initializeMobileMap() {
            const container = document.getElementById('map');
            const options = {
                center: new kakao.maps.LatLng(37.5665, 126.9780),
                level: 6,
                mapTypeId: kakao.maps.MapTypeId.ROADMAP
            };
            
            mobileMap = new kakao.maps.Map(container, options);
            
            // ÌÑ∞Ïπò Ïù¥Î≤§Ìä∏ Ï≤òÎ¶¨
            kakao.maps.event.addListener(mobileMap, 'click', function(mouseEvent) {
                const latlng = mouseEvent.latLng;
                showMobileLocationSafety(latlng);
            });
            
            // Îç∞Î™® Îç∞Ïù¥ÌÑ∞ Î°úÎìú
            loadMobileDemoData();
            
            // ÌòÑÏû¨ ÏúÑÏπò ÏûêÎèô ÌôïÏù∏ (Î™®Î∞îÏùº Ï†ÑÏö©)
            getCurrentLocationMobile();
        }
        
        // Î™®Î∞îÏùº Îç∞Î™® Îç∞Ïù¥ÌÑ∞
        function loadMobileDemoData() {
            const mobileDemo = [
                {
                    name: 'Ï†úÏ£º ÌïúÎùºÏÇ∞',
                    lat: 33.3617, lng: 126.5292,
                    safetyScore: 92,
                    features: ['Ï¢ÖÌï©Î≥ëÏõê 10Î∂Ñ', 'Ìó¨Í∏∞ Ï∞©Î•ôÏû•', 'AED ÏôÑÎπÑ']
                },
                {
                    name: 'Î∂ÄÏÇ∞ Ìï¥Ïö¥ÎåÄ',
                    lat: 35.1587, lng: 129.1604,
                    safetyScore: 95,
                    features: ['Ìï¥ÏÉÅÍµ¨Ï°∞ÎåÄ', '24ÏãúÍ∞Ñ ÏùëÍ∏âÏã§', 'ÏùòÎ£åÏßÑ ÏÉÅÏ£º']
                },
                {
                    name: 'ÏÑ§ÏïÖÏÇ∞ Íµ≠Î¶ΩÍ≥µÏõê',
                    lat: 38.1192, lng: 128.4651,
                    safetyScore: 87,
                    features: ['ÏÇ∞ÏïÖÍµ¨Ï°∞ÎåÄ', 'ÏùëÍ∏âÌó¨Í∏∞', 'ÏùòÎ£åÏßÑ ÎåÄÍ∏∞']
                },
                {
                    name: 'Í≤ΩÏ£º Î∂àÍµ≠ÏÇ¨',
                    lat: 35.7898, lng: 129.3320,
                    safetyScore: 89,
                    features: ['ÏùëÍ∏âÏ≤òÏπòÏã§', 'AED', 'ÏùòÎ£åÏßÑ ÏàúÏ∞∞']
                }
            ];
            
            mobileDemo.forEach(place => {
                addMobileSafetyMarker(place);
            });
            
            displayMobileRecommendations(mobileDemo);
        }
        
        // Î™®Î∞îÏùº ÏïàÏ†Ñ ÎßàÏª§ Ï∂îÍ∞Ä
        function addMobileSafetyMarker(place) {
            const position = new kakao.maps.LatLng(place.lat, place.lng);
            
            let markerColor = place.safetyScore >= 90 ? '#4CAF50' : 
                             place.safetyScore >= 80 ? '#2196F3' : '#FFC107';
            
            const markerContent = `
                <div class="marker-custom" style="background: linear-gradient(135deg, ${markerColor}, ${markerColor}dd)">
                    üèÜ ${place.safetyScore}
                </div>
            `;
            
            const customOverlay = new kakao.maps.CustomOverlay({
                position: position,
                content: markerContent,
                yAnchor: 1
            });
            
            customOverlay.setMap(mobileMap);
            
            // ÌÑ∞Ïπò Ïù¥Î≤§Ìä∏
            const overlayElement = customOverlay.getContent();
            overlayElement.addEventListener('click', function() {
                showMobilePlaceInfo(place);
                // ÌñÖÌã± ÌîºÎìúÎ∞± (ÏßÄÏõêÎêòÎäî Í≤ΩÏö∞)
                if (navigator.vibrate) {
                    navigator.vibrate(50);
                }
            });
            
            mobileMarkers.push({ overlay: customOverlay, data: place });
        }
        
        // Î™®Î∞îÏùº Ïû•ÏÜå Ï†ïÎ≥¥ ÌëúÏãú
        function showMobilePlaceInfo(place) {
            // ÏßÑÎèô ÌîºÎìúÎ∞±
            if (navigator.vibrate) {
                navigator.vibrate([100, 50, 100]);
            }
            
            const alert = `üèÜ ${place.name}\n\n` +
                         `üõ°Ô∏è ÏïàÏ†ÑÎèÑ: ${place.safetyScore}/100Ï†ê\n\n` +
                         `‚úÖ ÏïàÏã¨ Ìè¨Ïù∏Ìä∏:\n${place.features.map(f => `‚Ä¢ ${f}`).join('\n')}\n\n` +
                         `ÏôÑÎ≤ΩÌïú ÏïàÏ†Ñ ÏãúÏÑ§Î°ú Í∞ÄÏ°± Î™®Îëê ÏïàÏã¨ÌïòÍ≥† Ï¶êÍ∏∞Ïã§ Ïàò ÏûàÏäµÎãàÎã§! üòä`;
            
            if (confirm(alert + '\n\nüìç Ïù¥ Í≥≥ÏúºÎ°ú Ïù¥ÎèôÌïòÏãúÍ≤†ÏäµÎãàÍπå?')) {
                mobileMap.setCenter(new kakao.maps.LatLng(place.lat, place.lng));
                mobileMap.setLevel(4);
                showMobileNotification(`${place.name}Î°ú Ïù¥ÎèôÌñàÏäµÎãàÎã§! üéØ`);
            }
        }
        
        // ÌòÑÏû¨ ÏúÑÏπò ÌôïÏù∏ (Î™®Î∞îÏùº)
        function getCurrentLocationMobile() {
            if (navigator.geolocation) {
                const options = {
                    enableHighAccuracy: true,
                    timeout: 5000,
                    maximumAge: 0
                };
                
                navigator.geolocation.getCurrentPosition(
                    function(position) {
                        const lat = position.coords.latitude;
                        const lng = position.coords.longitude;
                        const latlng = new kakao.maps.LatLng(lat, lng);
                        
                        // ÌòÑÏû¨ ÏúÑÏπò ÎßàÏª§
                        const currentLocationContent = `
                            <div style="
                                background: linear-gradient(135deg, #FF5722, #F44336);
                                color: white;
                                padding: 6px 12px;
                                border-radius: 20px;
                                font-size: 12px;
                                font-weight: bold;
                                box-shadow: 0 4px 12px rgba(255,87,34,0.6);
                                border: 2px solid white;
                                animation: pulse 2s infinite;
                            ">
                                üìç ÎÇ¥ ÏúÑÏπò
                            </div>
                        `;
                        
                        const currentLocationOverlay = new kakao.maps.CustomOverlay({
                            position: latlng,
                            content: currentLocationContent,
                            yAnchor: 1
                        });
                        
                        currentLocationOverlay.setMap(mobileMap);
                        
                        // ÏßÄÎèÑ Ï§ëÏã¨ Ïù¥Îèô
                        mobileMap.setCenter(latlng);
                        mobileMap.setLevel(5);
                        
                        // ÌòÑÏû¨ ÏúÑÏπò ÏïàÏ†ÑÎèÑ ÌëúÏãú
                        showMobileLocationSafety(latlng);
                        
                        // ÏßÑÎèô ÌîºÎìúÎ∞±
                        if (navigator.vibrate) {
                            navigator.vibrate([200, 100, 200]);
                        }
                    },
                    function(error) {
                        console.log('ÏúÑÏπò Ï†ïÎ≥¥ Ïò§Î•ò:', error);
                    },
                    options
                );
            }
        }
        
        // ÏúÑÏπò ÏïàÏ†ÑÎèÑ ÌëúÏãú (Î™®Î∞îÏùº)
        function showMobileLocationSafety(latlng) {
            const safetyScore = Math.floor(Math.random() * 15) + 85;
            const overlay = document.getElementById('safetyOverlay');
            const scoreElement = document.getElementById('currentScore');
            
            scoreElement.textContent = safetyScore;
            overlay.querySelector('.score-circle').style.setProperty('--score-percent', safetyScore + '%');
            
            overlay.classList.remove('hidden');
            
            // 3Ï¥à ÌõÑ ÏûêÎèô Ïà®ÍπÄ
            setTimeout(() => {
                if (!overlay.classList.contains('hidden')) {
                    overlay.classList.add('hidden');
                }
            }, 5000);
        }
        
        // Î∞îÌÖÄÏãúÌä∏ Í¥ÄÎ¶¨
        function showBottomSheet(sheetId) {
            // ÌòÑÏû¨ Ïó¥Î¶∞ ÏãúÌä∏ Îã´Í∏∞
            if (currentBottomSheet) {
                currentBottomSheet.classList.remove('show');
            }
            
            // ÏÉà ÏãúÌä∏ Ïó¥Í∏∞
            const sheet = document.getElementById(sheetId);
            if (sheet) {
                sheet.classList.add('show');
                currentBottomSheet = sheet;
                
                // ÏßÑÎèô ÌîºÎìúÎ∞±
                if (navigator.vibrate) {
                    navigator.vibrate(100);
                }
            }
        }
        
        function hideBottomSheet() {
            if (currentBottomSheet) {
                currentBottomSheet.classList.remove('show');
                currentBottomSheet = null;
            }
        }
        
        // Î™®Î∞îÏùº Ï∂îÏ≤ú Ïû•ÏÜå ÌëúÏãú
        function displayMobileRecommendations(places) {
            const container = document.getElementById('mobileRecommendedPlaces');
            container.innerHTML = '';
            
            places.forEach(place => {
                const card = document.createElement('div');
                card.className = 'bg-white rounded-2xl shadow-lg p-4 touch-feedback';
                card.style.cursor = 'pointer';
                
                const safetyColor = place.safetyScore >= 90 ? 'green' : 
                                   place.safetyScore >= 80 ? 'blue' : 'yellow';
                
                card.innerHTML = `
                    <div class="flex items-start space-x-3">
                        <div class="w-16 h-16 bg-gradient-to-br from-blue-400 to-purple-500 rounded-xl flex items-center justify-center text-2xl">
                            ${place.name.includes('Ï†úÏ£º') ? 'üèùÔ∏è' : 
                              place.name.includes('Î∂ÄÏÇ∞') ? 'üèñÔ∏è' : 
                              place.name.includes('ÏÑ§ÏïÖÏÇ∞') ? 'üèîÔ∏è' : 'üèõÔ∏è'}
                        </div>
                        <div class="flex-1">
                            <div class="flex items-center justify-between mb-2">
                                <h3 class="font-bold text-gray-800">${place.name}</h3>
                                <span class="bg-${safetyColor}-100 text-${safetyColor}-800 px-2 py-1 rounded-full text-xs font-bold">
                                    üèÜ ${place.safetyScore}Ï†ê
                                </span>
                            </div>
                            <div class="text-xs text-gray-600 space-y-1">
                                ${place.features.slice(0, 2).map(feature => 
                                    `<div>‚úÖ ${feature}</div>`
                                ).join('')}
                            </div>
                        </div>
                    </div>
                `;
                
                card.addEventListener('click', function() {
                    moveToMobilePlace(place.lat, place.lng, place.name);
                    hideBottomSheet();
                });
                
                container.appendChild(card);
            });
        }
        
        // Ïû•ÏÜåÎ°ú Ïù¥Îèô (Î™®Î∞îÏùº)
        function moveToMobilePlace(lat, lng, name) {
            const position = new kakao.maps.LatLng(lat, lng);
            mobileMap.setCenter(position);
            mobileMap.setLevel(4);
            
            showMobileLocationSafety(position);
            showMobileNotification(`${name}Î°ú Ïù¥ÎèôÌñàÏäµÎãàÎã§! üåü`);
            
            // ÏßÑÎèô ÌîºÎìúÎ∞±
            if (navigator.vibrate) {
                navigator.vibrate([100, 50, 100]);
            }
        }
        
        // Î™®Î∞îÏùº ÏïåÎ¶º
        function showMobileNotification(message, duration = 3000) {
            const notification = document.createElement('div');
            notification.className = `
                fixed top-4 left-4 right-4 z-50
                bg-white border-l-4 border-green-500 
                rounded-lg shadow-lg p-4
                transform transition-all duration-300
                translate-y-[-100px] opacity-0
            `;
            
            notification.innerHTML = `
                <div class="flex items-center space-x-3">
                    <div class="text-green-500 text-xl">‚úÖ</div>
                    <div class="flex-1 text-sm text-gray-800">${message}</div>
                    <button class="text-gray-400" onclick="this.parentElement.parentElement.remove()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            // Ïï†ÎãàÎ©îÏù¥ÏÖò
            setTimeout(() => {
                notification.style.transform = 'translateY(0)';
                notification.style.opacity = '1';
            }, 100);
            
            // ÏûêÎèô Ï†úÍ±∞
            setTimeout(() => {
                notification.style.transform = 'translateY(-100px)';
                notification.style.opacity = '0';
                setTimeout(() => notification.remove(), 300);
            }, duration);
        }
        
        // Ïù¥Î≤§Ìä∏ Î¶¨Ïä§ÎÑàÎì§
        document.addEventListener('DOMContentLoaded', function() {
            // ÏßÄÎèÑ Ï¥àÍ∏∞Ìôî
            initializeMobileMap();
            
            // ÌîåÎ°úÌåÖ Î≤ÑÌäºÎì§
            document.getElementById('emergencyFloatingBtn').addEventListener('click', function() {
                document.getElementById('emergencyModal').classList.remove('hidden');
            });
            
            document.getElementById('locationFloatingBtn').addEventListener('click', function() {
                getCurrentLocationMobile();
                showMobileNotification('ÌòÑÏû¨ ÏúÑÏπòÎ•º ÌôïÏù∏Ìï©ÎãàÎã§ üìç');
            });
            
            document.getElementById('searchFloatingBtn').addEventListener('click', function() {
                showBottomSheet('searchBottomSheet');
            });
            
            // ÌïòÎã® ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    // ÌôúÏÑ± ÏÉÅÌÉú Î≥ÄÍ≤Ω
                    document.querySelectorAll('.nav-btn').forEach(b => {
                        b.classList.remove('text-blue-600');
                        b.classList.add('text-gray-400');
                    });
                    this.classList.remove('text-gray-400');
                    this.classList.add('text-blue-600');
                    
                    // Ìï¥Îãπ Î∞îÌÖÄÏãúÌä∏ ÌëúÏãú
                    const navId = this.id.replace('nav', '').toLowerCase();
                    if (navId === 'map') {
                        hideBottomSheet();
                    } else if (navId === 'recommend') {
                        showBottomSheet('recommendBottomSheet');
                    } else if (navId === 'family') {
                        showBottomSheet('familyBottomSheet');
                    } else if (navId === 'safety') {
                        showBottomSheet('safetyBottomSheet');
                    }
                });
            });
            
            // Í≤ÄÏÉâ Í∏∞Îä•
            document.getElementById('mobileSearchBtn').addEventListener('click', function() {
                const query = document.getElementById('mobileSearchInput').value.trim();
                performMobileSearch(query);
            });
            
            document.getElementById('mobileSearchInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    const query = this.value.trim();
                    performMobileSearch(query);
                }
            });
            
            // Í≤ÄÏÉâ ÌÉúÍ∑∏Îì§
            document.querySelectorAll('.search-tag').forEach(tag => {
                tag.addEventListener('click', function() {
                    const query = this.dataset.search;
                    performMobileSearch(query);
                });
            });
            
            // ÏùëÍ∏âÏÉÅÌô© Î™®Îã¨
            document.querySelectorAll('.emergency-type-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const type = this.dataset.emergency;
                    handleMobileEmergency(type);
                });
            });
            
            document.getElementById('call119Mobile').addEventListener('click', function() {
                if (confirm('119Ïóê Ïã†Í≥†ÌïòÏãúÍ≤†ÏäµÎãàÍπå?\n\nÏã§Ï†ú ÏùëÍ∏âÏÉÅÌô©ÏóêÏÑúÎäî Ï¶âÏãú 119Ïóê Ïã†Í≥†ÌïòÏÑ∏Ïöî.')) {
                    // Ïã§Ï†úÎ°úÎäî tel:119 ÎßÅÌÅ¨Î•º ÏÇ¨Ïö©
                    showMobileNotification('119 Ïã†Í≥†Í∞Ä Ï†ëÏàòÎêòÏóàÏäµÎãàÎã§ üö®');
                }
            });
            
            document.getElementById('closeEmergencyModal').addEventListener('click', function() {
                document.getElementById('emergencyModal').classList.add('hidden');
            });
            
            // Ïò§Î≤ÑÎ†àÏù¥ Îã´Í∏∞
            document.getElementById('closeOverlay').addEventListener('click', function() {
                document.getElementById('safetyOverlay').classList.add('hidden');
            });
            
            // PWA ÏÑ§Ïπò Î≤ÑÌäº
            document.getElementById('installApp').addEventListener('click', function() {
                if (deferredPrompt) {
                    deferredPrompt.prompt();
                    deferredPrompt.userChoice.then((choiceResult) => {
                        deferredPrompt = null;
                        document.getElementById('installPrompt').style.display = 'none';
                    });
                }
            });
            
            document.getElementById('dismissInstall').addEventListener('click', function() {
                document.getElementById('installPrompt').style.display = 'none';
            });
            
            // Î∞îÌÖÄÏãúÌä∏ Î∞∞Í≤Ω ÌÑ∞ÏπòÏãú Îã´Í∏∞
            document.addEventListener('click', function(e) {
                if (currentBottomSheet && !currentBottomSheet.contains(e.target) && 
                    !e.target.closest('.nav-btn') && 
                    !e.target.closest('.floating-btn')) {
                    hideBottomSheet();
                }
            });
            
            // ÌôòÏòÅ Î©îÏãúÏßÄ
            setTimeout(() => {
                showMobileNotification('ÏïàÏã¨Ïó¨Ìñâ Ïä§ÌÖù Î™®Î∞îÏùºÏóê Ïò§Ïã† Í≤ÉÏùÑ ÌôòÏòÅÌï©ÎãàÎã§! üéâ', 4000);
            }, 1000);
        });
        
        // Î™®Î∞îÏùº Í≤ÄÏÉâ ÏàòÌñâ
        function performMobileSearch(query) {
            if (!query) return;
            
            showMobileLoading(true);
            
            const ps = new kakao.maps.services.Places();
            ps.keywordSearch(query, function(data, status, pagination) {
                showMobileLoading(false);
                
                if (status === kakao.maps.services.Status.OK) {
                    const place = data[0];
                    const position = new kakao.maps.LatLng(place.y, place.x);
                    
                    mobileMap.setCenter(position);
                    mobileMap.setLevel(5);
                    
                    showMobileLocationSafety(position);
                    showMobileNotification(`${place.place_name}ÏùÑ(Î•º) Ï∞æÏïòÏäµÎãàÎã§! üéØ`);
                    
                    // ÏµúÍ∑º Í≤ÄÏÉâÏñ¥Ïóê Ï∂îÍ∞Ä
                    addToRecentSearches(query);
                    
                    hideBottomSheet();
                } else {
                    showMobileNotification('Í≤ÄÏÉâ Í≤∞Í≥ºÍ∞Ä ÏóÜÏäµÎãàÎã§ üîç');
                }
            });
        }
        
        // ÏµúÍ∑º Í≤ÄÏÉâÏñ¥ Ï∂îÍ∞Ä
        function addToRecentSearches(query) {
            const recentContainer = document.getElementById('recentSearches');
            const recentItem = document.createElement('div');
            recentItem.className = 'flex items-center justify-between py-2 border-b border-gray-100';
            
            recentItem.innerHTML = `
                <div class="flex items-center space-x-3">
                    <i class="fas fa-clock text-gray-400"></i>
                    <span class="text-sm">${query}</span>
                </div>
                <button class="text-gray-400 text-sm" onclick="this.parentElement.remove()">
                    <i class="fas fa-times"></i>
                </button>
            `;
            
            recentItem.addEventListener('click', function() {
                performMobileSearch(query);
            });
            
            recentContainer.insertBefore(recentItem, recentContainer.firstChild);
        }
        
        // Î™®Î∞îÏùº ÏùëÍ∏âÏÉÅÌô© Ï≤òÎ¶¨
        function handleMobileEmergency(type) {
            const emergencyInfo = {
                chest_pain: { hospital: 'Ïã¨Ïû•ÎÇ¥Í≥º', time: '3Î∂Ñ', name: 'Í∞ïÎÇ®ÏÑ∏Î∏åÎûÄÏä§Î≥ëÏõê' },
                unconscious: { hospital: 'ÏùëÍ∏âÏã§', time: '2Î∂Ñ', name: 'ÏÇºÏÑ±ÏÑúÏö∏Î≥ëÏõê' },
                bleeding: { hospital: 'Ïô∏ÏÉÅÏô∏Í≥º', time: '4Î∂Ñ', name: 'ÏÑúÏö∏ÏïÑÏÇ∞Î≥ëÏõê' },
                other: { hospital: 'ÏùëÍ∏âÏã§', time: '5Î∂Ñ', name: 'ÏÑúÏö∏ÎåÄÌïôÍµêÎ≥ëÏõê' }
            };
            
            const info = emergencyInfo[type];
            
            // ÏßÑÎèô ÌîºÎìúÎ∞±
            if (navigator.vibrate) {
                navigator.vibrate([200, 100, 200, 100, 200]);
            }
            
            alert(`üö® ÏùëÍ∏âÏÉÅÌô© ÎåÄÏùë ÏïàÎÇ¥\n\n` +
                  `üè• ÏµúÏ†Å Î≥ëÏõê: ${info.name}\n` +
                  `‚öïÔ∏è Ï†ÑÎ¨∏Í≥º: ${info.hospital}\n` +
                  `üöó ÏòàÏÉÅÏãúÍ∞Ñ: ${info.time}\n\n` +
                  `Ï¶âÏãú 119Ïóê Ïã†Í≥†ÌïòÍ≥† Î≥ëÏõêÏúºÎ°ú Ïù¥ÎèôÌïòÏÑ∏Ïöî.\n\n` +
                  `üìç Î≥ëÏõêÏúºÎ°ú Í∏∏ÏïàÎÇ¥Î•º ÏãúÏûëÌï©ÎãàÎã§.`);
            
            document.getElementById('emergencyModal').classList.add('hidden');
            showMobileNotification(`${info.name} Í∏∏ÏïàÎÇ¥Î•º ÏãúÏûëÌï©ÎãàÎã§ üöó`);
        }
        
        // Î™®Î∞îÏùº Î°úÎî©
        function showMobileLoading(show) {
            const loading = document.getElementById('mobileLoading');
            if (show) {
                loading.classList.remove('hidden');
            } else {
                loading.classList.add('hidden');
            }
        }
        
        // ÌÑ∞Ïπò Ï†úÏä§Ï≤ò Ï≤òÎ¶¨
        let touchStartY = 0;
        let touchEndY = 0;
        
        document.addEventListener('touchstart', function(e) {
            touchStartY = e.changedTouches[0].screenY;
        });
        
        document.addEventListener('touchend', function(e) {
            touchEndY = e.changedTouches[0].screenY;
            handleSwipe();
        });
        
        function handleSwipe() {
            const swipeDistance = touchStartY - touchEndY;
            
            // ÏúÑÎ°ú Ïä§ÏôÄÏù¥ÌîÑ (Î∞îÌÖÄÏãúÌä∏ Ïó¥Í∏∞)
            if (swipeDistance > 50 && !currentBottomSheet) {
                showBottomSheet('recommendBottomSheet');
            }
            // ÏïÑÎûòÎ°ú Ïä§ÏôÄÏù¥ÌîÑ (Î∞îÌÖÄÏãúÌä∏ Îã´Í∏∞)
            else if (swipeDistance < -50 && currentBottomSheet) {
                hideBottomSheet();
            }
        }
    </script>
</body>
</html>